@datasetId=5d33e07d-9d00-49e5-86b6-73a61495d703
@parentDatasetId=65c69327-85b3-466e-ac30-2cb506b76cdd

@subjectAreaId=70ca9c93-0198-4b09-ab6e-660105b06b59
@researchSubjectId=70ca9c93-0198-4b09-ab6e-660105b06b59

@platformAdminToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgxMjM0NTY3OCIsImlhdCI6MTc2NDY3MDY5OSwiZXhwIjoxNzY2NTM0Njk5fQ.lk99LWqbRVgLVszrSTowyVqAjYH91voDzf8O81MfSuq35KGYsuCb1uUOaqXo3zvJ

# 68e71bea-421c-42b6-b796-1a480190afdd机构，管理员
@supervisorId = c4d9798f-4701-4ea1-b49d-218b84235432
@institutionSupervisorToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMCIsImlhdCI6MTc2NDgxOTE4NCwiZXhwIjoxNzY2NjgzMTg0fQ.YS4WV4wRdC_BNVT_6q5_tk5oy_yKV0bM4MJFTlnyOch9lXHdjbjl1A-SoNqfdXNb

# 68e71bea-421c-42b6-b796-1a480190afdd机构，数据集上传员7c34890d-e50b-44e1-991a-fbad1842fd25
@providerId = 7c34890d-e50b-44e1-991a-fbad1842fd25
@datasetUploaderToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMSIsImlhdCI6MTc2NDgxOTI0MiwiZXhwIjoxNzY2NjgzMjQyfQ.Lm1gEVO0YJJwPMvyb2ejd5A-fD2cpLMIyJJfsAYpAg8oB6VCK0Dlb10o5_R3nC8u

# 9664a7c9-e337-48d6-a55e-547c285f4ea7机构，管理员99ec84d8-9ccb-4a53-be97-4f385cb2d044
@personToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDIwMSIsImlhdCI6MTc2NDc1MjUyNywiZXhwIjoxNzY2NjE2NTI3fQ.dPuF4svGddDkbg5_c9ZXs-qLJdXHSTa76D2OWhEHV2WijYI9QNg1VRrbFSUaVmLN

# 文件记录ID占位符
@dataFileRecordId = bd41f35c-7892-46c6-b122-61236476e541
@dataDictFileRecordId = 6f7bf82e-733b-499e-a114-f898a1505d91
@termsAgreementFileRecordId = b8f4d075-d011-48b6-9693-2bcd6635a623

### 1. 上传数据文件
POST http://localhost:8080/api/files/upload?uploaderId={{providerId}}
Authorization: Bearer {{datasetUploaderToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="baseline.xlsx"
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

< ./file/baseline.xlsx
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 2. 上传数据字典文件
POST http://localhost:8080/api/files/upload?uploaderId={{providerId}}
Authorization: Bearer {{datasetUploaderToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="data-dictionary.xlsx"
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

< ./file/data-dictionary.xlsx
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 3. 上传条款协议文件
POST http://localhost:8080/api/files/upload?uploaderId={{providerId}}
Authorization: Bearer {{datasetUploaderToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="someone.pdf"
Content-Type: application/pdf

< ./file/someone.pdf
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 4. 创建新数据集（使用文件记录ID）
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集（使用文件记录）",
  "description": "这是一个使用文件记录ID的示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "{{dataFileRecordId}}",
  "dataDictRecordId": "{{dataDictFileRecordId}}",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "{{termsAgreementFileRecordId}}",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": null
}

### 5. 更新现有数据集（更改文件记录）
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "更新后的示例数据集（使用文件记录）",
  "description": "这是一个更新后的使用文件记录ID的示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1500,
  "variableCount": 75,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "{{dataFileRecordId}}",
  "dataDictRecordId": null,
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "{{termsAgreementFileRecordId}}",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": ["68e71bea-421c-42b6-b796-1a480190afdd"]
}