@datasetId=52c50e97-baa8-41ff-92c5-7ea998f216f5
@datasetVersionId=acdb8689-9ed8-41f6-83c7-90a06d4e5ed5

@subjectAreaId=70ca9c93-0198-4b09-ab6e-660105b06b59

@platformAdminToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgxMjM0NTY3OCIsImlhdCI6MTc2NDY3MDY5OSwiZXhwIjoxNzY2NTM0Njk5fQ.lk99LWqbRVgLVszrSTowyVqAjYH91voDzf8O81MfSuq35KGYsuCb1uUOaqXo3zvJ

# 68e71bea-421c-42b6-b796-1a480190afdd机构，管理员
@institutionSupervisorToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMCIsImlhdCI6MTc2NDgxOTE4NCwiZXhwIjoxNzY2NjgzMTg0fQ.YS4WV4wRdC_BNVT_6q5_tk5oy_yKV0bM4MJFTlnyOch9lXHdjbjl1A-SoNqfdXNb

# 68e71bea-421c-42b6-b796-1a480190afdd机构，数据集上传员7c34890d-e50b-44e1-991a-fbad1842fd25
@datasetUploaderToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMSIsImlhdCI6MTc2NDgxOTI0MiwiZXhwIjoxNzY2NjgzMjQyfQ.Lm1gEVO0YJJwPMvyb2ejd5A-fD2cpLMIyJJfsAYpAg8oB6VCK0Dlb10o5_R3nC8u

### 获取特定数据集的所有版本信息
GET http://localhost:8080/api/datasets/{{datasetId}}/versions

### 获取特定数据集的所有版本信息（认证用户）
GET http://localhost:8080/api/datasets/{{datasetId}}/versions
Authorization: Bearer {{datasetUploaderToken}}

### 为现有数据集添加新版本
POST http://localhost:8080/api/manage/datasets/{{datasetId}}/versions
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "titleCn": "示例数据集",
  "description": "这是示例数据集的新版本",
  "type": "COHORT",
  "category": "医学研究",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "04d705f6-a130-4518-9700-5c583ad55f97",
  "dataDictRecordId": "e573c3b0-61f0-40dd-befe-85abf2def6d6",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "90b0617d-ad42-4b1a-8e96-597e654f0907",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "versionDescription": "数据集第二版，增加了更多样本数据"
}

### 平台管理员审核通过数据集版本
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/{{datasetVersionId}}/approval
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "approved": true
}

### 平台管理员审核驳回数据集版本
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/{{datasetVersionId}}/approval
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "approved": false,
  "rejectionReason": "数据格式不符合要求"
}

### 机构管理员审核通过数据集版本
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/{{datasetVersionId}}/approval
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "approved": true
}

### 机构管理员审核驳回数据集版本
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/{{datasetVersionId}}/approval
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "approved": false,
  "rejectionReason": "缺少必要的元数据信息"
}