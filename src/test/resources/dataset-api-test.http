@datasetId=e621aab7-7660-42c9-807d-1435861d6e42
@parentDatasetId=65c69327-85b3-466e-ac30-2cb506b76cdd

@subjectAreaId=70ca9c93-0198-4b09-ab6e-660105b06b59
@researchSubjectId=70ca9c93-0198-4b09-ab6e-660105b06b59

@platformAdminToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgxMjM0NTY3OCIsImlhdCI6MTc2NDY3MDY5OSwiZXhwIjoxNzY2NTM0Njk5fQ.lk99LWqbRVgLVszrSTowyVqAjYH91voDzf8O81MfSuq35KGYsuCb1uUOaqXo3zvJ

# 68e71bea-421c-42b6-b796-1a480190afdd机构，管理员
@supervisorId = c4d9798f-4701-4ea1-b49d-218b84235432
@institutionSupervisorToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMCIsImlhdCI6MTc2NDgxOTE4NCwiZXhwIjoxNzY2NjgzMTg0fQ.YS4WV4wRdC_BNVT_6q5_tk5oy_yKV0bM4MJFTlnyOch9lXHdjbjl1A-SoNqfdXNb

# 68e71bea-421c-42b6-b796-1a480190afdd机构，数据集上传员7c34890d-e50b-44e1-991a-fbad1842fd25
@providerId = 7c34890d-e50b-44e1-991a-fbad1842fd25
@datasetUploaderToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMSIsImlhdCI6MTc2NDgxOTI0MiwiZXhwIjoxNzY2NjgzMjQyfQ.Lm1gEVO0YJJwPMvyb2ejd5A-fD2cpLMIyJJfsAYpAg8oB6VCK0Dlb10o5_R3nC8u

# 9664a7c9-e337-48d6-a55e-547c285f4ea7机构，管理员99ec84d8-9ccb-4a53-be97-4f385cb2d044
@personToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDIwMSIsImlhdCI6MTc2NDc1MjUyNywiZXhwIjoxNzY2NjE2NTI3fQ.dPuF4svGddDkbg5_c9ZXs-qLJdXHSTa76D2OWhEHV2WijYI9QNg1VRrbFSUaVmLN


### 获取所有公开数据集
GET http://localhost:8080/api/datasets
Authorization: Bearer {{datasetUploaderToken}}

### 获取所有公开数据集
GET http://localhost:8080/api/datasets/timeline
Authorization: Bearer {{personToken}}

### 根据ID获取特定公开数据集
GET http://localhost:8080/api/datasets/{{datasetId}}

### 平台管理员获取所有数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{platformAdminToken}}

### 机构管理员获取本机构数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{personToken}}

### 数据集上传员获取本机构数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{datasetUploaderToken}}

### 平台管理员根据ID获取特定数据集
GET http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{platformAdminToken}}

### 机构管理员根据ID获取特定数据集
GET http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{institutionSupervisorToken}}

### 平台管理员创建新数据集
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "titleCn": "示例数据集",
  "description": "这是一个示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileUrl": "https://example.com/dataset.zip",
  "dataDictUrl": "https://example.com/datadict.pdf",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms.pdf",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五"
}

### 机构管理员创建新数据集
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "titleCn": "机构管理员创建的数据集",
  "description": "由机构管理员创建的数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileUrl": "https://example.com/dataset.zip",
  "dataDictUrl": "https://example.com/datadict.pdf",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms.pdf",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五"
}

### 数据集上传员创建新数据集
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集3",
  "description": "这是另2个示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "7c34890d-e50b-44e1-991a-fbad1842fd25",
  "supervisorId": "c4d9798f-4701-4ea1-b49d-218b84235432",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 2000,
  "variableCount": 100,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{researchSubjectId}}",
  "fileUrl": "https://example.com/dataset2.zip",
  "dataDictUrl": "https://example.com/datadict2.pdf",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "赵六",
  "dataCollectionUnit": "某研究中心",
  "contactPerson": "孙七",
  "contactInfo": "sunqi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms2.pdf",
  "samplingMethod": "分层抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-07-01T00:00:00Z",
  "currentVersionDate": "2023-07-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "周八"
}

### 平台管理员更新数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "titleCn": "更新后的示例数据集",
  "description": "这是一个更新后的示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1500,
  "variableCount": 75,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileUrl": "https://example.com/dataset_updated.zip",
  "dataDictUrl": "https://example.com/datadict_updated.pdf",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms_updated.pdf",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五"
}

### 机构管理员更新数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "titleCn": "机构管理员更新的数据集",
  "description": "由机构管理员更新的数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1500,
  "variableCount": 75,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileUrl": "https://example.com/dataset_updated.zip",
  "dataDictUrl": "https://example.com/datadict_updated.pdf",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms_updated.pdf",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五"
}

### 数据集上传员更新自己机构的数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "更新后的示例数据集2",
  "description": "这是另一个更新后的示例数据集",
  "type": "cohort",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 2500,
  "variableCount": 125,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileUrl": "https://example.com/dataset2_updated.zip",
  "dataDictUrl": "https://example.com/datadict2_updated.pdf",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "赵六",
  "dataCollectionUnit": "某研究中心",
  "contactPerson": "孙七",
  "contactInfo": "sunqi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementUrl": "https://example.com/terms2_updated.pdf",
  "samplingMethod": "分层抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-07-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": "{{parentDatasetId}}",
  "principalInvestigator": "周八"
}

### 平台管理员删除数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{platformAdminToken}}

### 机构管理员删除数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{institutionSupervisorToken}}

### 数据集上传员删除自己机构的数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{datasetUploaderToken}}

### 平台管理员审核通过数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/approval
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "approved": true
}

### 平台管理员审核驳回数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/approval
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "approved": false,
  "rejectionReason": "数据格式不符合要求"
}

### 机构管理员审核通过数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/approval
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "approved": true
}

### 机构管理员审核驳回数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/approval
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "approved": false,
  "rejectionReason": "缺少必要的元数据信息"
}
