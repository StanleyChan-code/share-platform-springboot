@datasetId=52c50e97-baa8-41ff-92c5-7ea998f216f5
@parentDatasetId=65c69327-85b3-466e-ac30-2cb506b76cdd

@subjectAreaId=70ca9c93-0198-4b09-ab6e-660105b06b59
@researchSubjectId=70ca9c93-0198-4b09-ab6e-660105b06b59

@platformAdminToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgxMjM0NTY3OCIsImlhdCI6MTc2NDY3MDY5OSwiZXhwIjoxNzY2NTM0Njk5fQ.lk99LWqbRVgLVszrSTowyVqAjYH91voDzf8O81MfSuq35KGYsuCb1uUOaqXo3zvJ

# 68e71bea-421c-42b6-b796-1a480190afdd机构，管理员
@supervisorId = c4d9798f-4701-4ea1-b49d-218b84235432
@institutionSupervisorToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMCIsImlhdCI6MTc2NDgxOTE4NCwiZXhwIjoxNzY2NjgzMTg0fQ.YS4WV4wRdC_BNVT_6q5_tk5oy_yKV0bM4MJFTlnyOch9lXHdjbjl1A-SoNqfdXNb

# 68e71bea-421c-42b6-b796-1a480190afdd机构，数据集上传员7c34890d-e50b-44e1-991a-fbad1842fd25
@providerId = 7c34890d-e50b-44e1-991a-fbad1842fd25
@datasetUploaderToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDEwMSIsImlhdCI6MTc2NDgxOTI0MiwiZXhwIjoxNzY2NjgzMjQyfQ.Lm1gEVO0YJJwPMvyb2ejd5A-fD2cpLMIyJJfsAYpAg8oB6VCK0Dlb10o5_R3nC8u

# 9664a7c9-e337-48d6-a55e-547c285f4ea7机构，管理员99ec84d8-9ccb-4a53-be97-4f385cb2d044
@personToken = eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxMzgwMDAwMDIwMSIsImlhdCI6MTc2NDc1MjUyNywiZXhwIjoxNzY2NjE2NTI3fQ.dPuF4svGddDkbg5_c9ZXs-qLJdXHSTa76D2OWhEHV2WijYI9QNg1VRrbFSUaVmLN

# 示例机构ID列表
@institutionId1 = 68e71bea-421c-42b6-b796-1a480190afdd
@institutionId2 = 9664a7c9-e337-48d6-a55e-547c285f4ea7

### 获取特定数据集的时间轴视图（匿名用户）
GET http://localhost:8080/api/datasets/{{parentDatasetId}}/timeline

### 获取特定数据集的时间轴视图（认证用户）
GET http://localhost:8080/api/datasets/{{datasetId}}/timeline
Authorization: Bearer {{datasetUploaderToken}}

### 获取特定数据集的时间轴视图（机构内用户）
GET http://localhost:8080/api/datasets/{{parentDatasetId}}/timeline
Authorization: Bearer {{personToken}}

### 获取所有公开数据集
GET http://localhost:8080/api/datasets
Authorization: Bearer {{datasetUploaderToken}}

### 获取所有公开数据集
GET http://localhost:8080/api/datasets/timeline
Authorization: Bearer {{datasetUploaderToken}}

### 根据ID获取特定公开数据集
GET http://localhost:8080/api/datasets/{{parentDatasetId}}

### 平台管理员获取所有数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{platformAdminToken}}

### 机构管理员获取本机构数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{personToken}}

### 数据集上传员获取本机构数据集
GET http://localhost:8080/api/manage/datasets
Authorization: Bearer {{datasetUploaderToken}}

### 平台管理员根据ID获取特定数据集
GET http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{platformAdminToken}}

### 机构管理员根据ID获取特定数据集
GET http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{personToken}}

### 平台管理员创建新数据集（允许所有人申请）
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集",
  "description": "这是一个示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "0e8f02c9-c276-495e-8245-dbf8eb4a5043",
  "dataDictRecordId": "1f9g13d0-d387-506f-9356-ecg9fc5b6154",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "2g0h24e1-e498-617g-0467-fdh0gd6c7265",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": null
}

### 平台管理员创建新数据集（不允许任何人申请）
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集（禁止申请）",
  "description": "这是一个禁止申请的示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "0e8f02c9-c276-495e-8245-dbf8eb4a5043",
  "dataDictRecordId": "1f9g13d0-d387-506f-9356-ecg9fc5b6154",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "2g0h24e1-e498-617g-0467-fdh0gd6c7265",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": []
}

### 平台管理员创建新数据集（仅允许特定机构申请）
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集（限制申请）",
  "description": "这是一个限制申请的示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "0e8f02c9-c276-495e-8245-dbf8eb4a5043",
  "dataDictRecordId": "1f9g13d0-d387-506f-9356-ecg9fc5b6154",
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "2g0h24e1-e498-617g-0467-fdh0gd6c7265",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": ["{{institutionId1}}", "{{institutionId2}}"]
}

### 机构管理员创建新数据集
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "titleCn": "机构管理员创建的数据集",
  "description": "由机构管理员创建的数据集",
  "type": "COHORT",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1000,
  "variableCount": 50,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "dbedb266-0ad0-4cf9-90b2-52c6cc6da55c",
  "dataDictRecordId": "853015cf-a4f4-47a9-8a94-b2db6f312b35",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "0c4cb5a3-06cf-4769-84d5-77d4813898a3",
  "samplingMethod": "随机抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-06-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": null
}

### 数据集上传员创建新数据集
POST http://localhost:8080/api/manage/datasets
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "示例数据集3",
  "description": "这是另2个示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "providerId": null,
  "supervisorId": null,
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 2000,
  "variableCount": 100,
  "keywords": ["医学", "研究", "数据"],
  "subjectAreaId": "{{researchSubjectId}}",
  "fileRecordId": "39504013-7fbb-4485-afc7-acaddc5c5724",
  "dataDictRecordId": "cfdd8a46-b001-4d47-9b3f-9aeb81ac6339",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "赵六",
  "dataCollectionUnit": "某研究中心",
  "contactPerson": "孙七",
  "contactInfo": "sunqi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "9c8260ac-5b77-4364-9c7f-13ce9918c1e5",
  "samplingMethod": "分层抽样",
  "versionNumber": "1.0",
  "firstPublishedDate": "2023-07-01T00:00:00Z",
  "currentVersionDate": "2023-07-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "周八",
  "applicationInstitutionIds": []
}

### 平台管理员更新数据集（修改申请机构设置）
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "titleCn": "更新后的示例数据集",
  "description": "这是一个更新后的示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1500,
  "variableCount": 75,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "0e8f02c9-c276-495e-8245-dbf8eb4a5043",
  "dataDictRecordId": "1f9g13d0-d387-506f-9356-ecg9fc5b6154",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "2g0h24e1-e498-617g-0467-fdh0gd6c7265",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": ["{{institutionId1}}"]
}

### 机构管理员更新数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "titleCn": "机构管理员更新的数据集",
  "description": "由机构管理员更新的数据集",
  "type": "COHORT",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 1500,
  "variableCount": 75,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "0e8f02c9-c276-495e-8245-dbf8eb4a5043",
  "dataDictRecordId": "1f9g13d0-d387-506f-9356-ecg9fc5b6154",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "张三",
  "dataCollectionUnit": "某医院",
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "2g0h24e1-e498-617g-0467-fdh0gd6c7265",
  "samplingMethod": "随机抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-06-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": null,
  "principalInvestigator": "王五",
  "applicationInstitutionIds": null
}

### 数据集上传员更新自己机构的数据集
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "titleCn": "更新后的示例数据集2",
  "description": "这是另一个更新后的示例数据集",
  "type": "COHORT",
  "category": "医学研究",
  "providerId": "{{providerId}}",
  "supervisorId": "{{supervisorId}}",
  "startDate": "2023-01-01T00:00:00Z",
  "endDate": "2023-12-31T00:00:00Z",
  "recordCount": 2500,
  "variableCount": 125,
  "keywords": ["医学", "研究", "数据", "更新"],
  "subjectAreaId": "{{subjectAreaId}}",
  "fileRecordId": "3b7e80b4-734e-40f5-b741-ee651d7e4e1c",
  "dataDictRecordId": "2b999917-b934-4274-a090-7b634dde02da",
  "approved": true,
  "published": true,
  "shareAllData": true,
  "datasetLeader": "赵六",
  "dataCollectionUnit": "某研究中心",
  "contactPerson": "孙七",
  "contactInfo": "sunqi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "termsAgreementRecordId": "d4923f3e-75c3-401a-86c5-94a90d415483",
  "samplingMethod": "分层抽样",
  "versionNumber": "2.0",
  "firstPublishedDate": "2023-07-01T00:00:00Z",
  "currentVersionDate": "2023-12-01T00:00:00Z",
  "parentDatasetId": "{{parentDatasetId}}",
  "principalInvestigator": "周八",
  "applicationInstitutionIds": ["{{institutionId2}}"]
}

### 平台管理员删除数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{platformAdminToken}}

### 机构管理员删除数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{institutionSupervisorToken}}

### 数据集上传员删除自己机构的数据集
DELETE http://localhost:8080/api/manage/datasets/{{datasetId}}
Authorization: Bearer {{datasetUploaderToken}}

### 平台管理员更新数据集基本信息
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/basic-info
Content-Type: application/json
Authorization: Bearer {{platformAdminToken}}

{
  "description": "这是一个更新后的示例数据集",
  "keywords": ["医学", "研究", "数据", "更新"],
  "published": true,
  "shareAllData": true,
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "samplingMethod": "随机抽样",
  "applicationInstitutionIds": ["{{institutionId1}}"]
}

### 机构管理员更新数据集基本信息
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/basic-info
Content-Type: application/json
Authorization: Bearer {{institutionSupervisorToken}}

{
  "description": "由机构管理员更新的数据集",
  "keywords": ["医学", "研究", "数据", "更新"],
  "published": true,
  "shareAllData": true,
  "contactPerson": "李四",
  "contactInfo": "lisi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "samplingMethod": "随机抽样",
  "applicationInstitutionIds": null
}

### 数据集上传员更新自己机构的数据集基本信息
PUT http://localhost:8080/api/manage/datasets/{{datasetId}}/basic-info
Content-Type: application/json
Authorization: Bearer {{datasetUploaderToken}}

{
  "description": "这是另一个更新后的示例数据集",
  "keywords": ["医学", "研究", "数据", "更新"],
  "published": true,
  "shareAllData": true,
  "contactPerson": "孙七",
  "contactInfo": "sunqi@example.com",
  "demographicFields": "{}",
  "outcomeFields": "{}",
  "samplingMethod": "分层抽样",
  "applicationInstitutionIds": ["{{institutionId2}}"]
}