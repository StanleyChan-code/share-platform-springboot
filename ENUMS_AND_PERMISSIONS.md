# 枚举类型和权限说明

## 1. 枚举类型

### 1.1 UserAuthority (用户权限)

系统目前定义了三种用户权限：

| 枚举值 | 描述 |
| --- | --- |
| platform_admin | 平台管理员，拥有最高权限 |
| institution_supervisor | 机构管理员，管理本机构用户和数据 |
| dataset_uploader | 数据集上传员，可上传数据集 |

### 1.2 其他枚举类型

## 2. 权限控制规则

### 2.1 权限层次结构

平台采用三层权限控制模型：
1. 平台管理员(platform_admin) - 最高权限级别
2. 机构管理员(institution_supervisor) - 中层管理权限
3. 数据集上传员(dataset_uploader) - 基础操作权限

### 2.2 权限访问规则

#### 2.2.1 平台管理员权限
- 可以管理所有机构、用户和数据集
- 可以授予任何类型的权限给用户
- 可以查看系统内所有资源

#### 2.2.2 机构管理员权限
- 可以管理本机构内的用户和数据集
- 可以授予除平台管理员外的任何权限给用户
- 只能查看本机构内的资源

#### 2.2.3 数据集上传员权限
- 只能上传和管理自己的数据集
- 无法管理用户或机构
- 只能查看公开数据和自己上传的数据

## 3. 权限管理API

### 3.1 获取当前用户权限

**接口地址**: `GET /api/users/authorities`

**权限要求**: 任意已认证用户

**说明**: 
- 返回当前登录用户所拥有的所有权限

### 3.2 获取权限列表

**接口地址**: `GET /api/manage/authorities`

**权限要求**: 平台管理员或机构管理员

**说明**: 
- 平台管理员可以获取所有权限列表
- 机构管理员只能获取除平台管理员外的所有权限

### 3.3 获取指定用户权限

**接口地址**: `GET /api/manage/authorities/{userId}`

**权限要求**: 平台管理员或机构管理员

**说明**: 
- 平台管理员可以查看任意用户的权限
- 机构管理员只能查看本机构内用户的权限

### 3.4 更新用户权限

**接口地址**: `PUT /api/manage/authorities`

**权限要求**: 平台管理员或机构管理员

**请求体**:
```json
{
  "userId": "用户UUID",
  "authorities": ["权限枚举值列表"]
}
```

**说明**:
- 平台管理员可以为用户设置任何权限
- 机构管理员不能为用户添加平台管理员权限
- 机构管理员只能操作本机构内的用户